<html>
<body>

<script>
  window.opener.console.log('oauthcallback >> getting params')
  var oauthParams = {}
  var params = {}, 
      queryString = location.hash.substring(1),
      regex = /([^&=]+)=([^&]*)/g,
      m
  
  while (m = regex.exec(queryString)) {
    oauthParams[decodeURIComponent(m[1])] = decodeURIComponent(m[2])
  }

  window.opener.console.log('>>> returning oauthParams: ' + JSON.stringify(oauthParams))
  window.opener.setOauthParams(oauthParams)
  window.opener.location.reload()
  window.close()
</script>

</body>
</html>